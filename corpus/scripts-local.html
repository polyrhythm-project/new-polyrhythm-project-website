

<script>
// vim: ts=3:nowrap

//////////////////////////////
//
// displayExampleStartTsigTypeRds --
//

function displayExampleStartTsigTypeRds() {
	let selector = document.querySelector("#ExampleStartTsigTypeRds");
	if (!selector) {
		console.warn("Cannot find #ExampleStartTsigTypeRds");
		return;
	}
	let data = {};
	for (let i=0; i<EXAMPLELIST.length; i++) {
		let dataset = EXAMPLELIST[i][INDEX_Example_Dataset];
		if (!dataset.match(/^R/)) {
			continue;
		}
		let value = EXAMPLELIST[i][INDEX_Example_Start_Tsig_Type];
		if (data[value]) {
			data[value]++;
		} else {
			data[value] = 1;
		}
	}

	let vdata = [];
	let keys = Object.keys(data).sort();
	for (let i=0; i<keys.length; i++) {
		let entry = {"name": keys[i], "y": data[keys[i]]};
		vdata.push(entry);
	}

	Highcharts.chart('ExampleStartTsigTypeRds', {
		chart: { type: 'pie' },
		title: { text: null },
		credits: { enabled: false },
		tooltip: { pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>' },
		accessibility: { point: { valueSuffix: '%' } },
		plotOptions: {
			pie: {
				allowPointSelect: true,
				cursor: 'pointer',
				dataLabels: {
					enabled: true,
					format: '<b>{point.name}</b>: {point.percentage:.1f} %',
					connectorColor: 'silver',
					style: {
						color: 'black',
						textOutline: 'none'
					}
				}
			}
		},
		series: [{ name: 'Share', data: vdata }]
	});

}



//////////////////////////////
//
// displayExampleStartTsigTypeTds --
//

function displayExampleStartTsigTypeTds() {
	let selector = document.querySelector("#ExampleStartTsigTypeTds");
	if (!selector) {
		console.warn("Cannot find #ExampleStartTsigTypeTds");
		return;
	}
	let data = {};
	for (let i=0; i<EXAMPLELIST.length; i++) {
		let dataset = EXAMPLELIST[i][INDEX_Example_Dataset];
		if (!dataset.match(/^T/)) {
			continue;
		}
		let value = EXAMPLELIST[i][INDEX_Example_Start_Tsig_Type];
		if (data[value]) {
			data[value]++;
		} else {
			data[value] = 1;
		}
	}

	let vdata = [];
	let keys = Object.keys(data).sort();
	for (let i=0; i<keys.length; i++) {
		let entry = {"name": keys[i], "y": data[keys[i]]};
		vdata.push(entry);
	}

	Highcharts.chart('ExampleStartTsigTypeTds', {
		chart: { type: 'pie' },
		title: { text: null },
		credits: { enabled: false },
		tooltip: { pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>' },
		accessibility: { point: { valueSuffix: '%' } },
		plotOptions: {
			pie: {
				allowPointSelect: true,
				cursor: 'pointer',
				dataLabels: {
					enabled: true,
					format: '<b>{point.name}</b>: {point.percentage:.1f} %',
					connectorColor: 'silver',
					style: {
						color: 'black',
						textOutline: 'none'
					}
				}
			}
		},
		series: [{ name: 'Share', data: vdata }]
	});

}



//////////////////////////////
//
// displayExampleByComposers --
//

function displayExampleByComposers() {
	let data = {};
	for (let i=0; i<EXAMPLELIST.length; i++) {
		let composer = GetComposerLastName(EXAMPLELIST[i][INDEX_Composer_Name]);
		if (data[composer]) {
			data[composer]++;
		} else {
			data[composer] = 1;
		}
	}

	let vdata = [];
	let keys = Object.keys(data).sort();
	for (let i=0; i<keys.length; i++) {
		let entry = [ keys[i], data[keys[i]] ];
		vdata.push(entry);
	}

console.log("VDATA", vdata);

	var colors = [
		'#FF4500', '#FF6347', '#FF8C00', '#FF4500', '#CD5C5C', // Reds and Oranges
		'#8B0000', '#B22222', '#228B22', '#32CD32', '#008000', // Greens
		'#006400', '#ADFF2F', '#00FF7F', '#2E8B57', '#3CB371', // More Greens
		'#0000CD', '#00008B', '#4169E1', '#4682B4', '#5F9EA0', // Blues
		'#6495ED', '#6A5ACD', '#7B68EE', '#8A2BE2', '#4B0082', // More Blues
		'#9932CC', '#8B008B', '#800080', '#9370DB', '#9400D3', // Purples
		'#BA55D3', '#DA70D6', '#EE82EE', '#DDA0DD', '#FF00FF', // More Purples
	];

	let id = "ExamplesByComposers";
	WordCloud(document.getElementById(id), {
		list: vdata,
		gridSize: Math.round(16 * document.getElementById(id).offsetWidth / 1024),
		weightFactor: function (size) {
			return size * (document.getElementById(id).offsetWidth / 1024);
		},
		fontFamily: 'Helvetica, Arial, sans-serif',
		color: function (word, weight, fontSize, distance, theta) {
			return colors[Math.floor(Math.random() * colors.length)];
		},
		rotateRatio: 0.8, // Higher ratio for more rotated words
		rotationSteps: 12, // More rotation steps for varied angles
		backgroundColor: '#fff',
		drawOutOfBound: false,
		shuffle: true,
		shape: 'circle'
	});

}


</script>



